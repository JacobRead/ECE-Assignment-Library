; Test Socket for left_rotate.bin
; To use this test socket:
; 1) Replace any HALT instructions from left_rotate.bin with RET (1100 000 111 000000)
; 2) Open Simulator
; 3) Load in left_rotate.obj
; 4) Load in left_rotate_test.obj
; 5) Run the program


.ORIG 0x3200

; Test Case 1: 0xFFFF shifting 0 - 16 times
	AND R1, R1, #0
TEST_ONE
	LD R0, CASE_ONE
	LD R2, VALUE
	STR R0, R2, #0
	LD R2, SHIFT
	STR R1, R2, #0

	LD R2, PROGRAM
	JSRR R2

	LEA R2, START_ONE
	ADD R2, R2, R1
	LDR R2, R2, #0
	LDI R3, RESULT

	NOT R3, R3
	ADD R3, R3, #1
	ADD R3, R2, R3
	BRnp ERROR_ONE

	ADD R1, R1, #1
	LD R5, MAX_SHIFT
	ADD R4, R1, R5
	BRnz TEST_ONE
	LEA R0, TEST_ONE_PASS
	PUTS

;Test Case 2: 0x0000 shifting 0 - 16 times
	AND R1, R1, #0
TEST_TWO
	LD R0, CASE_TWO
	LD R2, VALUE
	STR R0, R2, #0
	LD R2, SHIFT
	STR R1, R2, #0

	LD R2, PROGRAM
	JSRR R2

	LEA R2, START_TWO
	ADD R2, R2, R1
	LDR R2, R2, #0
	LDI R3, RESULT

	NOT R3, R3
	ADD R3, R3, #1
	ADD R3, R2, R3
	BRnp ERROR_TWO

	ADD R1, R1, #1
	LD R5, MAX_SHIFT
	ADD R4, R1, R5
	BRnz TEST_TWO
	LEA R0, TEST_TWO_PASS
	PUTS

;Test Case 3: 0xA5A5 shifting 0 -16 times
	AND R1, R1, #0
TEST_THREE
	LD R0, CASE_LAST
	LD R2, VALUE
	STR R0, R2, #0
	LD R2, SHIFT
	STR R1, R2, #0

	LD R2, PROGRAM
	JSRR R2

	LEA R2, START_THREE
	ADD R2, R2, R1
	LDR R2, R2, #0
	LDI R3, RESULT

	NOT R3, R3
	ADD R3, R3, #1
	ADD R3, R2, R3
	BRnp ERROR_THREE

	ADD R1, R1, #1
	LD R5, MAX_SHIFT
	ADD R4, R1, R5
	BRnz TEST_THREE
	LEA R0, TEST_THREE_PASS
	PUTS
	HALT

ERROR_ONE
	LEA R0, TEST_ONE_FAIL
	PUTS
	HALT

ERROR_TWO
	LEA R0, TEST_TWO_FAIL
	PUTS
	HALT

ERROR_THREE
	LEA R0, TEST_THREE_FAIL
	PUTS
	HALT

PROGRAM   .FILL 0x3000
SHIFT	  .FILL 0x3101
VALUE	  .FILL 0x3100
RESULT	  .FILL 0x3102

MAX_SHIFT .FILL 0xFFF0
CASE_ONE  .FILL 0xFFFF
CASE_TWO  .FILL 0x0000
CASE_LAST .FILL 0xA5A5

TEST_ONE_PASS
	.STRINGZ " Test Case 1 PASSED\n"
TEST_ONE_FAIL
	.STRINGZ " Program Failure at Test Case 1\n"
TEST_TWO_PASS
	.STRINGZ " Test Case 2 PASSED\n"
TEST_TWO_FAIL
	.STRINGZ " Program Failure at Test Case 2\n"
TEST_THREE_PASS
	.STRINGZ " Test Case 3 PASSED\n"
TEST_THREE_FAIL
	.STRINGZ " Program Failure at Test Case 3\n"

; TEST 1 ARRAY
START_ONE
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF
	.FILL 0XFFFF

; TEST 2 ARRAY
START_TWO
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000
	.FILL 0X0000

; TEST 3 ARRAY
START_THREE
	.FILL 0XA5A5
	.FILL 0X4B4B
	.FILL 0x9696
	.FILL 0x2D2D
	.FILL 0x5A5A
	.FILL 0xB4B4
	.FILL 0x6969
	.FILL 0xD2D2
	.FILL 0xA5A5
	.FILL 0x4B4B
	.FILL 0x9696
	.FILL 0x2D2D
	.FILL 0x5A5A
	.FILL 0xB4B4
	.FILL 0x6969
	.FILL 0xD2D2
	.FILL 0xA5A5
.END